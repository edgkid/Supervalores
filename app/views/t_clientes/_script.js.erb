$(document).ready(function(){
  mostrar_form_tipo_persona = function(value){
    if (value == 2){
      $(".tipo_persona").addClass("hide")
      $(".tipo_persona_form_fields").removeClass("hide")
    }
    else if (value == 1){
      $(".tipo_persona").addClass("hide")
      $(".tipo_empresa_form_fields").removeClass("hide")
    }
    else{
      $(".tipo_persona").addClass("hide")
      $(".tipo_otro_form_fields").removeClass("hide")
    }
  }

  $("#t_cliente_es_prospecto").click(function(){
    $("#ibox_resoluciones").toggleClass("hide")
  })
  
  mostrar_form_tipo_persona(<%= @registro.tipo_persona %> | $("#select-tipo-persona").val())
  $("#select-tipo-persona").change(function(evt){
    select = $(evt.target)
    value = select.val()
    mostrar_form_tipo_persona(value)
  })

  <% if @nueva_resolucion != nil && @nueva_resolucion.errors.any? %>
    $('#agregar_resolucion').modal('show');
  <% end %>

  $("#agregar_empresa")
  .on('show.bs.modal', function(){
    $("#t_persona_crear_empresa").val(1)
  })
  .on('hide.bs.modal', function(){
    $("#t_persona_crear_empresa").val(0)
  });

  <% if @nueva_empresa != nil && @nueva_empresa.errors.any? %>
    $('#agregar_empresa').modal('show');
  <% end %>  
})